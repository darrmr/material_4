body {
    padding: 100px;
}

.masonry-grid {
  /* 1. Создаем сетку с авто-заполнением и минимальной шириной колонки */
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  
  /* 2. Фиксируем РАВНЫЙ отступ между элементами */
  gap: 50px;
  
  /* 3. Автоматические ряды. 'dense' заполняет пустоты */
  grid-auto-rows: 10px; /* Базовый шаг! Важно для 'dense' */
  grid-auto-flow: row dense;
}

.card {
  /* 4. Каждая карточка занимает необходимое количество grid-рядов */
  /* Высота карточки в шагах (10px) = желаемая высота / 10 */
  /* Пример: высота 200px -> span 20 */
  grid-row-end: span 20; /* Задается для каждой карточки индивидуально! */
  
  /* Стили карточки */
  background: #fff;
  border-radius: 8px;
  padding: 15px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

/* Пример задания разной высоты для карточек (через JS или вручную в CSS) */
.card:nth-child(1) { grid-row-end: span 25; }
.card:nth-child(2) { grid-row-end: span 15; }
.card:nth-child(3) { grid-row-end: span 40; }